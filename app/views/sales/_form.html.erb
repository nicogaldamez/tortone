<%= form_for @sale do |f| %>
  <%= f.hidden_field :vehicle_id %>

<article class="box box-primary">

  <section class="box-body">

    <div class="row">
      <div class="col-md-4">
        <fieldset class="form-group">
          <%= label_tag 'Vehículo'  %>
          <%= text_field_tag :vehicle, @sale.vehicle.decorate.identification,
                class: 'form-control disabled', disabled: true  %>
        </fieldset>
      </div>
    </div>

    <div class="row">
      <div class="col-md-6">
        <fieldset class="form-group">
          <%= f.label :customer_id %>
          <%= f.hidden_field :customer_id, class: 'select2', required: true,
            data: { behavior: 'searchCustomer', url: search_customers_path,
                    'record-id' => @sale.customer.try(:customer_id),
                    'record-text' => @sale.customer.try(:to_s) } %>
        </fieldset>
      </div>
      <div class="col-md-2">
        <div class="form-group">
          <div class="fake-label"></div>
          <%= link_to 'Nuevo', new_customer_path(modal: true), class: 'btn btn-primary',
            data: { behavior: 'ajax-modal', target: '#js-modal' } %>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-md-3">
        <fieldset class="form-group">
          <%= f.label :price %>
          <div class="input-group">
            <span class="input-group-addon">
              <span class="fa fa-dollar"></span>
            </span>
            <%= f.text_field :price, class: 'form-control',
              placeholder: 'Ingrese el monto', required: true %>
          </div>
        </fieldset>
      </div>
      <div class="col-md-3">
        <fieldset class="form-group">
          <%= f.label :cash %>
          <div class="input-group">
            <span class="input-group-addon">
              <span class="fa fa-dollar"></span>
            </span>
            <%= f.text_field :cash, class: 'form-control',
              placeholder: 'Ingrese el monto', required: true %>
          </div>
        </fieldset>
      </div>
    </div>

    <div class="row">

      <div class="col-md-3">
        <fieldset class="form-group">
          <%= f.label :advance %>
          <div class="input-group">
            <span class="input-group-addon">
              <span class="fa fa-dollar"></span>
            </span>
            <%= f.text_field :advance, class: 'form-control',
              placeholder: 'Ingrese el monto', required: true %>
          </div>
        </fieldset>
      </div>
      <div class="col-md-3">
        <fieldset class="form-group">
          <%= f.label :advance_delivered_on %>
          <div class='input-group date datepicker'>
            <span class="input-group-addon">
              <span class="fa fa-calendar"></span>
            </span>
            <%= f.text_field :advance_delivered_on, class: 'form-control', required: true %>
          </div>
        </fieldset>
      </div>
    </div>

    <div class="row">
      <div class="col-md-8">
        <fieldset class="form-group">
          <%= f.label :sold_on %>
          <div class='input-group date datepicker col-md-4'>
            <span class="input-group-addon">
              <span class="fa fa-calendar"></span>
            </span>
            <%= f.text_field :sold_on, class: 'form-control' %>
          </div>
          <p class="help-block">Dejar vacío si no se concretó la totalidad de la venta</p>
        </fieldset>
      </div>
    </div>

    <div class="row">
      <div class="col-md-12">
        <fieldset class="form-group">
          <%= f.label :notes %>
          <%= f.text_area :notes, class: 'form-control', rows: 8 %>
        </fieldset>
      </div>
    </div>

  </section>
</article>

<div class="row">
  <div class="col-md-12">
    <fieldset class="form-group">
      <%= f.submit 'Guardar', class: 'btn btn-success', data: { 'disable-with' => 'Guardando...' } %>
    </fieldset>
  </div>
</div>

<% end %>
